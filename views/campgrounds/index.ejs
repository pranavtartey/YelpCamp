<% layout('layout/boilerplate') %> 
<div id="cluster-map"></div>
<h1>All Campgrounds</h1>
<a href="/campgrounds/new" class="btn btn-success">Add Campground</a>
<% for(let campground of campgrounds){ %>
   <div class="card mb-4">
       <div class="row">
           <div class="col-md-4">
               <% if(campground.images.length) { %> 
               <img class="img-fluid" src ="<%= campground.images[0].url %> " alt="" srcset="">
               <% } else { %>
                <img class="img-fluid" src="https://res.cloudinary.com/dhlbhqpas/image/upload/v1664556342/kowxbpakwvollun4wxjr.jpg" alt=""> 
                <% } %> 
           </div>
           <div class="col md-8">
               <div class="card-body">
                   <h5 class="card-title">
                    <%= campground.title %> 
                   </h5>
                   <p class="card-text"><%= campground.description %> </p>
                   <p class="text-muted"><%= campground.location %> </p>
                   <a class="btn btn-primary" href="/campgrounds/<%= campground._id %> ">View <%= campground.title %> </a>
               </div>
           </div>
       </div>
   </div>
<% } %> 

<script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN %>';
    const campgrounds = {features: <%-JSON.stringify(campgrounds)%>}
</script> 

<script src="/javaScripts/clusterMap.js"></script>